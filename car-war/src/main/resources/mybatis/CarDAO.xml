<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.bwl.dao.ICarDAO">

    <select id="bannerQueryList" resultType="java.util.Map">
        SELECT * FROM car_banner ORDER BY id DESC
    </select>

    <select id="newsQueryList" resultType="java.util.Map">
        SELECT * FROM car_news ORDER BY id DESC
    </select>
    <select id="photosQueryList" resultType="java.util.Map">
        SELECT * FROM car_photos ORDER BY id DESC
    </select>
    <select id="servicesQueryList"  resultType="java.util.Map">
        SELECT * FROM car_services ORDER BY id DESC
    </select>

    <select id="newQueryPage" resultType="java.util.Map">
        SELECT
        *
        FROM
        car_news
            ORDER BY id DESC
        <if test="offset != null">
            limit ${offset}, ${rows}
        </if>
    </select>
    <select id="newQueryCount" resultType="java.lang.Integer">
        SELECT
        count(id)
        FROM
        car_news
    </select>
    <select id="newQueryById" resultType="java.util.Map">
        SELECT
        *
        FROM
        car_news
        WHERE
        id = #{id}
    </select>

    <select id="carQueryPage" resultType="java.util.Map">
        SELECT
        *
        FROM
        car_car
        <where>
            <if test="mymap!=null">
            <if test="mymap.queryname!=null">
               and  name like CONCAT("%",#{mymap.queryname},"%")
            </if>
            <if test="mymap.minprice!=null">
                and  price  &gt;= #{mymap.minprice}
            </if>
            <if test="mymap.maxprice!=null">
                and  price &lt;= #{mymap.maxprice}
            </if>
            </if>
        </where>
        ORDER BY id DESC
        <if test="offset != null">
            limit ${offset}, ${rows}
        </if>
    </select>
    <select id="carQueryCount" resultType="java.lang.Integer">
        SELECT
        count(id)
        FROM
        car_car
    </select>
    <select id="carQueryById" resultType="java.util.Map">
        SELECT
        *
        FROM
        car_car
        WHERE
        id = #{id}
    </select>

    <select id="buyQueryPage" resultType="java.util.Map">
        SELECT
        *
        FROM
        car_buy
            ORDER BY id DESC
        <if test="offset != null">
            limit ${offset}, ${rows}
        </if>
    </select>
    <select id="buyQueryCount" resultType="java.lang.Integer">
        SELECT
        count(id)
        FROM
        car_buy
    </select>
    <select id="buyQueryById" resultType="java.util.Map">
        SELECT
        *
        FROM
        car_buy
        WHERE
        id = #{id}
    </select>
    <select id="login" resultType="java.lang.Boolean">
        SELECT
        count(1)
        FROM
        car_login
        WHERE
        name = #{username}
        AND
        password = #{pwd}
    </select>
    <insert id="addBuy" parameterType="java.util.Map">
        INSERT INTO car_buy (
        name,
        phone,
        message,
        carId
        ) VALUES (
        #{name},
        #{phone},
        #{message},
        #{carId}
        )
    </insert>

    <insert id="addNew" parameterType="java.util.Map">
        INSERT INTO car_news (
        title,
        content,
        subinfo,
        date,
        img
        ) VALUES (
        #{title},
        #{content},
        #{subinfo},
        #{date},
        #{img}
        )
    </insert>

    <insert id="addCar" parameterType="java.util.Map">
        INSERT INTO car_car (
         name
         ,price
         ,img
         ,content
         ,RegNumbe
         ,Mileage
         ,BodyType
         ,ModelYear
         ,EngineSize
         ,Trans
         ,FuelType
         ,Specifications
         ,Safety
         ,Convenience
         ,Comfort
         ,Entertainment
         ) VALUES (
            #{name}
           ,#{price}
           ,#{img}
           ,#{content}
           ,#{RegNumbe}
           ,#{Mileage}
           ,#{BodyType}
           ,#{ModelYear}
           ,#{EngineSize}
           ,#{Trans}
           ,#{FuelType}
           ,#{Specifications}
           ,#{Safety}
           ,#{Convenience}
           ,#{Comfort}
           ,#{Entertainment}
        )
    </insert>
    <delete id="deleteCar" parameterType="java.lang.Object">
        DELETE FROM car_car WHERE id=#{id}
    </delete>
    <delete id="deleteNew" parameterType="java.lang.Object">
        DELETE FROM car_news WHERE id=#{id}
    </delete>
    <delete id="deleteBuy" parameterType="java.lang.Object">
        DELETE FROM car_buy WHERE id=#{id}
    </delete>
</mapper>

